import React from 'react';
import styles from './VoiceAssistantButton.styles';
import Button from '../../atoms/buttons/Button';
import Text from '../../atoms/Text';
import Icon from '../../atoms/Icon';
import { steelGray } from '../../../theme';
import { View } from 'react-native';
import AnyButton from '../../atoms/buttons/AnyButton';

interface Props {
  isListening: boolean;
  message: string;
  sendMessage: () => void;
  stopListening: () => void;
  startListening: () => void;
}

const VoiceAssistantButton = ({
  isListening,
  message,
  sendMessage,
  startListening,
  stopListening,
}: Props) => {
  return (
    <View style={styles().container}>
      <Button
        onPress={!isListening && message ? sendMessage : startListening}
        disabled={isListening}
        style={styles(isListening).btn}>
        <Text style={styles().txt}>
          {!isListening && !message
            ? 'Grabar'
            : isListening
              ? 'Escuchando...'
              : 'Enviar'}
        </Text>
      </Button>

      {!isListening && !message ? null : isListening ? (
        <AnyButton
          onPress={stopListening}
          w="18%"
          h={75}
          style={styles().iconContainer}>
          <Icon
            scale="43"
            viewBox="0 0 43 43"
            d="M21.5 0.0625C17.2601 0.0625 13.1154 1.31979 9.58997 3.67537C6.06459 6.03095 3.3169 9.37903 1.69434 13.2962C0.0717885 17.2134 -0.352745 21.5238 0.474425 25.6822C1.3016 29.8407 3.34332 33.6605 6.34141 36.6586C9.3395 39.6567 13.1593 41.6984 17.3178 42.5256C21.4762 43.3528 25.7866 42.9282 29.7038 41.3057C33.621 39.6831 36.9691 36.9354 39.3246 33.41C41.6802 29.8847 42.9375 25.7399 42.9375 21.5C42.9375 15.8144 40.6789 10.3617 36.6586 6.3414C32.6383 2.32109 27.1856 0.0625 21.5 0.0625ZM30.6875 27.625C30.6875 28.4372 30.3649 29.2162 29.7905 29.7905C29.2162 30.3648 28.4372 30.6875 27.625 30.6875H15.375C14.5628 30.6875 13.7838 30.3648 13.2095 29.7905C12.6352 29.2162 12.3125 28.4372 12.3125 27.625V15.375C12.3125 14.5628 12.6352 13.7838 13.2095 13.2095C13.7838 12.6352 14.5628 12.3125 15.375 12.3125H27.625C28.4372 12.3125 29.2162 12.6352 29.7905 13.2095C30.3649 13.7838 30.6875 14.5628 30.6875 15.375V27.625Z"
            fill={steelGray}
            styles={styles().icon}
          />
        </AnyButton>
      ) : (
        <AnyButton
          onPress={startListening}
          w="18%"
          h={75}
          style={styles().iconContainer}>
          <Icon
            scale="43"
            viewBox="0 0 43 43"
            d="M21.5 0C9.64502 0 0 9.64502 0 21.5C0 33.355 9.64502 43 21.5 43C33.355 43 43 33.355 43 21.5C43 9.64502 33.355 0 21.5 0ZM33.9038 18.828C33.9038 19.0643 33.81 19.2909 33.6429 19.458C33.4758 19.6251 33.2491 19.719 33.0128 19.719H26.8585C26.6822 19.7193 26.5098 19.6672 26.3631 19.5694C26.2165 19.4715 26.1022 19.3324 26.0348 19.1695C25.9673 19.0066 25.9498 18.8274 25.9844 18.6545C26.0189 18.4816 26.1041 18.3229 26.229 18.1985L28.5206 15.9069L27.9417 15.234C26.9063 14.1591 25.6207 13.3575 24.1998 12.901C22.7789 12.4444 21.267 12.347 19.7993 12.6176C18.3316 12.8881 16.9538 13.5182 15.7891 14.4514C14.6244 15.3846 13.7091 16.5919 13.125 17.9653C12.541 19.3387 12.3063 20.8354 12.4421 22.3217C12.5779 23.808 13.0798 25.2374 13.9031 26.4823C14.7264 27.7271 15.8453 28.7486 17.1598 29.4553C18.4743 30.162 19.9435 30.5319 21.4359 30.5321C23.3037 30.5303 25.1252 29.9507 26.6505 28.8727C28.1758 27.7947 29.3302 26.2711 29.9553 24.511C30.0277 24.3061 30.1398 24.1174 30.2851 23.9557C30.4305 23.7941 30.6062 23.6626 30.8024 23.5689C30.9985 23.4752 31.2112 23.421 31.4283 23.4094C31.6454 23.3979 31.8626 23.4293 32.0676 23.5017C32.2725 23.5741 32.4612 23.6862 32.6229 23.8315C32.7845 23.9769 32.916 24.1526 33.0097 24.3488C33.1034 24.5449 33.1576 24.7576 33.1691 24.9747C33.1807 25.1917 33.1493 25.409 33.0769 25.6139C32.3231 27.7472 30.9974 29.6323 29.2446 31.063C27.4919 32.4938 25.3795 33.4152 23.1385 33.7265C20.8974 34.0378 18.6139 33.7271 16.5376 32.8283C14.4612 31.9296 12.6718 30.4773 11.365 28.6303C10.0582 26.7832 9.28435 24.6125 9.12791 22.3554C8.97148 20.0982 9.43853 17.8415 10.478 15.8319C11.5175 13.8222 13.0894 12.137 15.022 10.9604C16.9545 9.78376 19.1734 9.16103 21.4359 9.16024C23.1057 9.15386 24.7592 9.48944 26.2944 10.1463C27.8296 10.8032 29.2141 11.7674 30.3625 12.9796L30.4204 13.0437L30.8659 13.5605L32.3833 12.0431C32.4642 11.9604 32.5606 11.8946 32.6671 11.8496C32.7735 11.8045 32.8879 11.781 33.0035 11.7806C33.1212 11.7796 33.2379 11.802 33.3468 11.8464C33.4558 11.8908 33.5548 11.9564 33.6383 12.0394C33.7217 12.1223 33.7879 12.221 33.8329 12.3297C33.878 12.4384 33.901 12.5549 33.9007 12.6726L33.9038 18.828Z"
            fill={steelGray}
            styles={styles().icon}
          />
        </AnyButton>
      )}
    </View>
  );
};

export default VoiceAssistantButton;
